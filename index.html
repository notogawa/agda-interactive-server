<!DOCTYPE html>
<html>
<title>Agda WebSocket Test</title>
<head>
  <meta charset="UTF-8">
  <script src="agda.js"></script>
</head>
<body>

<script type=text/javascript>
var f = function (x) {};
var onMessage = function (msg) {
    document.getElementById('agda_prompt').innerText = msg.data;
};
var proto = (location.protocol == 'http:') ? 'ws://' : 'wss://';
var agda = new Agda(proto+location.host, f, f, onMessage);
</script>

<pre id="log"></pre>

<form onsubmit="return false;">
  <textarea id="agda_buffer" style="width: 100%; height: 200px;">
module Main where

idAgda : {A : Set} → A → A
idAgda x = x</textarea>
  <input type="button" value="Reload" onclick="agda.sendSource(document.getElementById('agda_buffer').value); agda.sendReload();"/>
  <input type="button" value="Metas" onclick="agda.sendMetas();"/>
</form>

<pre id="agda_prompt" style="background-color: #000; color: #FFF"></pre>

</body>
</html>
