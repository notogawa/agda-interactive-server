<!DOCTYPE html>
<html>
<title>Agda WebSocket Test</title>
<head>
  <meta charset="UTF-8">
  <script src="agda.js"></script>
</head>
<body>

<script type=text/javascript>
var f = function (x) {};
var onMessage = function (msg) {
    document.getElementById('agda_prompt').innerText += msg.data;
};
var proto = (location.protocol == 'http:') ? 'ws://' : 'wss://';
var agda = new Agda(proto+location.host, f, f, onMessage);
</script>

<pre id="log"></pre>

<form onsubmit="return false;">
  <textarea id="agda_buffer" style="width: 100%; height: 200px;">
module Main where

idAgda : {A : Set} → A → A
idAgda x = ?
  </textarea>
  <input id="agda_command_reload" type="button" value="Reload" onclick="agda.sendSource(document.getElementById('agda_buffer').value);"/>
  <input id="agda_command_metas" type="button" value="Metas" onclick="agda.sendMetas();"/>
  <input id="agda_command_args_meta" type="text"/>
  <input id="agda_command_args_expr" type="text"/>
  <input id="agda_command_eval" type="button" value="Eval" onclick="agda.sendEval(document.getElementById('agda_command_args_meta').value, document.getElementById('agda_command_args_expr').value);"/>
  <input id="agda_command_context" type="button" value="Context" onclick="agda.sendContext(document.getElementById('agda_command_args_meta').value);"/>
  <input id="agda_command_refine" type="button" value="Refine" onclick="agda.sendRefine(document.getElementById('agda_command_args_meta').value, document.getElementById('agda_command_args_expr').value);"/>
</form>

<pre id="agda_prompt" style="background-color: #000; color: #FFF"></pre>

</body>
</html>
